<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="css/style.css">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="css/bootstrap-social.css" rel="stylesheet">
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>

<!-- <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"> -->


<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script> -->


<!-- <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script> -->

<title></title>

</head>
	<body>
		<nav class="navbar navbar-default">
		   <div class="container-fluid">
		   		<form class="form-inline" id="form-container">
						<div class="form-group">
					   	 	<label for="Movie Title">Movie Title:</label>
					    	<input type="text" class="form-control" id="movie_title" value="" placeholder="Enter Title">
						</div>

						<div class="form-group">
					    	<label for="Movie Year">Movie Year:</label>
					    	<input type="text" class="form-control" id="movie_year" value="" placeholder="Enter Year">
						</div>
					 <button type="submit" class="btn btn-default" id = "request">Send Query</button>
				</form>
		    </div>
		</nav>
		<div>
			
		</div>
		<div class="container-fluid">
				 <button type="button" class="btn btn-primary" id="sort_title">Sort by Title</button>
				 <button type="button" class="btn btn-primary" id="sort_age">Sort by Age</button>
				 <button type="button" class="btn btn-primary" id="sort_year">Sort by Year</button>
		         <table class="table table-bordered table-striped" >
				    <thead>
				      <tr>
				        <th>Poster</th>
				        <th>Movie Title</th>
				        <th>Movie Year</th>
				        <th>Released Year</th>
				      </tr>
				    </thead>
				    <tbody id="mv_details"></tbody>
				  </table>
		</div>

	</body>
</html>

<script type="text/javascript">

$(document).ready(function() {
		
		var movie_title =[
				{
					"Title": "Ex Machina",
					
				},
				{
					"Title": "The Martian",
				},
		];


	$("#request").click(function(e) 
	{
				// $("#mv_details").empty();
				// all_movie_list(movie_title);
				e.preventDefault();
				var Movie_name = $("#movie_title").val();
				var Movie_year = $("#movie_year").val();

				movie_list(Movie_name,Movie_year);
	});


 all_movie_list(movie_title);


 function all_movie_list(movie_title)
  {
  		for(i=0 ; i < movie_list.length ; i++)
  		{
  			var Movie_name_1 = movie_title[i]["Title"];
  			var Movie_year_1 = " ";
  			movie_list(Movie_name_1,Movie_year_1)
  		}
  }



function movie_list(Movie_name,Movie_year)
 {
 		 // $("#mv_details").empty();
	     var query_url = "http://www.omdbapi.com/?t="+ Movie_name + "&y="+ Movie_year +"&plot=full&r=json";  
		  $.ajax({
				    url: query_url,
				    dataType: 'json',
				    success:function(obj)
				   	 {
				     		console.log(JSON.stringify(obj,null,4));
				     		
				     		var details = [];
				     		details.push({
							     				"Title":obj["Title"],
							     				"Year":obj["Year"],
							     				"Released Year":obj["Released"],
							     				"Poster":obj["Poster"]
				     					})		  
				     		// console.log(JSON.stringify(details,null,4));
				     		$("#mv_details").append('<tr><td><img src="'+details[0]["Poster"]+'" id = "image_size"></td><td>'+details[0]["Title"]+'</td><td>'+details[0]["Year"]+'</td><td>'+details[0]["Released Year"]+'</td></tr>');

				     		// local_storage(details);
				     },
			              error: function (error) {
			                  console.log(error);
			              }
		 		});


  }
  // console.log(details);

	$("#sort_title").click(function() {
			
			var sort_title = movie_title.sort();
			console.log(JSON.stringify(sort_title,null,4));
			all_movie_list(sort_title);

	});

	// function local_storage()
	// {
		 
	// }

});

</script>